<script type="text/javascript" language="javascript">

function send()
{
    alert("calling url v9");
    var corsProxy = 'https://cors-anywhere.herokuapp.com/'
    var url = 'https://buenos-aires.restorando.com.ar/restaurantes-en-martinez,palermo,san-isidro,vicente-lopez,zona-norte/con-precio-4,5';
    var request = new Request(corsProxy + url, {
      method: 'GET', 
      headers: { }
    });
    fetch(request)
    .then(res => res.text())  
    .then(function(data) {
        var myRegexp = new RegExp('window\.__INITIAL_STATE__ = (.*?);($|\n)');
        var matcher = myRegexp.exec(data);
        var restaurantsJSON = JSON.parse(matcher[1]).search.restaurants;
                
        var randomIndex = Math.floor(Math.random() * restaurantsJSON.length);

        document.getElementById("div").innerHTML = restaurantsJSON[randomIndex].name;
    })
    .catch(function(err) {
    alert(err);
    });
 }

</script>


<html>
<body id='bod'><button type="submit" onclick="javascript:send()">call</button>
    <div id='div'>
    </div>
</body>
</html>
